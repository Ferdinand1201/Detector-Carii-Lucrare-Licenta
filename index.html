<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>YOLOv8 Object Detection</title>
    <style>
      body {
          font-family: 'Arial', sans-serif;
          background-color: #f0f4f8;
          display: flex;
          justify-content: center;
          align-items: center;
          height: 100vh;
          margin: 0;
      }

      .container {
          background-color: white;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
          text-align: center;
          max-width: 600px;
          width: 100%;
      }

      h1 {
          color: #333;
          font-size: 24px;
          margin-bottom: 20px;
      }

      #uploadInput {
          padding: 10px;
          border-radius: 5px;
          border: 1px solid #ddd;
          font-size: 16px;
          cursor: pointer;
          background-color: #4CAF50;
          color: white;
      }

      #uploadInput:hover {
          background-color: #45a049;
      }

      canvas {
          display: block;
          margin-top: 20px;
          border: 2px solid #ddd;
          border-radius: 8px;
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
          margin: 20px auto;
          max-width: 100%;
      }

      .description {
          color: #555;
          font-size: 14px;
          margin-top: 10px;
      }
    </style>
</head>
<body>
    <div class="container">
        <h1>YOLOv8 Object Detection</h1>
        <input id="uploadInput" type="file"/>
        <canvas></canvas>
        <p class="description">Select an image to upload and detect objects!</p>
    </div>

    <script>
      const input = document.getElementById("uploadInput");
      input.addEventListener("change",async(event) => {
          const data = new FormData();
          data.append("image_file",event.target.files[0],"image_file");
          const response = await fetch("/detect",{
              method:"post",
              body:data
          });
          const boxes = await response.json();
          draw_image_and_boxes(event.target.files[0],boxes);
      });

      function draw_image_and_boxes(file,boxes) {
          const img = new Image();
          img.src = URL.createObjectURL(file);
          img.onload = () => {
              const canvas = document.querySelector("canvas");
              canvas.width = img.width;
              canvas.height = img.height;
              const ctx = canvas.getContext("2d");
              ctx.drawImage(img, 0, 0);
              ctx.strokeStyle = "#00FF00";
              ctx.lineWidth = 3;
              ctx.font = "18px serif";
              boxes.forEach(([x1, y1, x2, y2, label]) => {
                  ctx.strokeRect(x1, y1, x2 - x1, y2 - y1);
              });
          };
      }
    </script>
</body>
</html>

